# üìù –°–µ—Ä–≤–∏—Å –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ç–µ–∫—Å—Ç–∞ ‚öôÔ∏è

![Go Version](https://img.shields.io/badge/go-1.21%2B-blue)
[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)
![SQLite](https://img.shields.io/badge/SQLite-3-green.svg)

–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ç–µ–∫—Å—Ç–∞ —Å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏ –ø–æ—Å—Ç–æ—è–Ω–Ω—ã–º —Ö—Ä–∞–Ω–∏–ª–∏—â–µ–º. –°–æ–∑–¥–∞–Ω —Å ‚ù§Ô∏è –Ω–∞ Go!

```bash
curl -X POST -H "Content-Type: text/plain" --data "–í–∞—à —Å–µ–∫—Ä–µ—Ç–Ω—ã–π —Ç–µ–∫—Å—Ç... ü§´"
```

## üåü –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

‚úÖ **–ú–≥–Ω–æ–≤–µ–Ω–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–µ—Ä–≤–µ—Ä–∞**  
`GET /health` ‚Üí `{"status": "server is running"}`

‚ú® **–£–º–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–µ–∫—Å—Ç–∞**  
–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ª—é–±—ã—Ö —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º IP –∫–ª–∏–µ–Ω—Ç–∞.

üîí **–•—Ä–∞–Ω–∏–ª–∏—â–µ –Ω–∞ –æ—Å–Ω–æ–≤–µ SQLite**  
–ü–æ—Å—Ç–æ—è–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º —Å—Ö–µ–º–æ–π.

üìä **–°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**  
–ö—Ä–∞—Å–∏–≤—ã–µ –ª–æ–≥–∏ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º `slog` –¥–ª—è –Ω–∞–±–ª—é–¥–∞–µ–º–æ—Å—Ç–∏.

---

## üöÄ –ù–∞—á–∞–ª–æ —Ä–∞–±–æ—Ç—ã

### üîß –ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

- **Go** 1.21+ ([—Å–∫–∞—á–∞—Ç—å](https://golang.org/))
- **SQLite3** ([–ø–æ–¥—Ä–æ–±–Ω–µ–µ](https://www.sqlite.org/index.html))

### ‚ö° –ë—ã—Å—Ç—Ä–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
git clone https://github.com/makhkets/interceptor
cd interceptor
go mod tidy
sqlite3 storage/database.db < schema.sql
```

### üèÉ –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞

```bash
go run main.go
```

–°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è –ø–æ –∞–¥—Ä–µ—Å—É [http://localhost:80](http://localhost:80) üéâ

---

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API

### ü©∫ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è

```http
GET /health
```

#### –û—Ç–≤–µ—Ç:

```json
{"status": "server is running"}
```

---

### üíå –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–µ–∫—Å—Ç–∞

```http
POST /steal
Content-Type: text/plain

–í–∞—à –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–π —Ç–µ–∫—Å—Ç...
```

#### –£—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç:

```
Data saved successfully
```

---

# üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

–ü—Ä–æ–µ–∫—Ç –ø–æ—Å—Ç—Ä–æ–µ–Ω –Ω–∞ **Go** –∏ –≤–∫–ª—é—á–∞–µ—Ç –≤ —Å–µ–±—è –º–æ–¥—É–ª–∏ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ç–µ–∫—Å—Ç–∞, –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –∏ —Ä–∞–±–æ—Ç—ã —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö.

```bash
Project:
‚îÇ   üìú go.mod              # –ú–æ–¥—É–ª—å–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ Go
‚îÇ   üìú go.sum              # –ö–æ–Ω—Ç—Ä–æ–ª—å–Ω–∞—è —Å—É–º–º–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
‚îÇ   üöÄ main.go             # –ì–ª–∞–≤–Ω–∞—è —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îÇ   üõ†Ô∏è makefile            # –°–∫—Ä–∏–ø—Ç—ã —Å–±–æ—Ä–∫–∏ –∏ –∫–æ–º–∞–Ω–¥
‚îÇ   üìñ README.md           # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞
‚îÇ
‚îú‚îÄ‚îÄ üèóÔ∏è build/               # –°–æ–±—Ä–∞–Ω–Ω—ã–µ –±–∏–Ω–∞—Ä–Ω—ã–µ —Ñ–∞–π–ª—ã
‚îÇ   ‚îÇ   ‚öôÔ∏è interceptor.exe  # –ò—Å–ø–æ–ª–Ω—è–µ–º—ã–π —Ñ–∞–π–ª —Å–µ—Ä–≤–∏—Å–∞
‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ üóÑÔ∏è storage/
‚îÇ           üõ¢Ô∏è database.db  # –§–∞–π–ª –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö SQLite
‚îÇ
‚îú‚îÄ‚îÄ üì¶ gen/                 # –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–¥ OpenAPI
‚îÇ   ‚îÇ   üìú api.yaml         # OpenAPI —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è
‚îÇ   ‚îÇ   üõ†Ô∏è generate.go      # –°–∫—Ä–∏–ø—Ç –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ üìÇ interceptor/
‚îÇ           üõ†Ô∏è oas_cfg_gen.go
‚îÇ           üõ†Ô∏è oas_client_gen.go
‚îÇ           üõ†Ô∏è oas_handlers_gen.go
‚îÇ           üõ†Ô∏è oas_interfaces_gen.go
‚îÇ           üõ†Ô∏è oas_json_gen.go
‚îÇ           üõ†Ô∏è oas_labeler_gen.go
‚îÇ           üõ†Ô∏è oas_middleware_gen.go
‚îÇ           üõ†Ô∏è oas_operations_gen.go
‚îÇ           üõ†Ô∏è oas_request_decoders_gen.go
‚îÇ           üõ†Ô∏è oas_request_encoders_gen.go
‚îÇ           üõ†Ô∏è oas_response_decoders_gen.go
‚îÇ           üõ†Ô∏è oas_response_encoders_gen.go
‚îÇ           üõ†Ô∏è oas_router_gen.go
‚îÇ           üõ†Ô∏è oas_schemas_gen.go
‚îÇ           üõ†Ô∏è oas_server_gen.go
‚îÇ           üõ†Ô∏è oas_unimplemented_gen.go
‚îÇ
‚îú‚îÄ‚îÄ üîß internal/            # –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –º–æ–¥—É–ª–∏ –ø—Ä–æ–µ–∫—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ üìÇ domain/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ üìù model.go     # –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –º–æ–¥–µ–ª–µ–π –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ üìÇ lib/             # –ë–∏–±–ª–∏–æ—Ç–µ–∫–∏
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ üìÇ logger/      # –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
‚îÇ   ‚îÇ       ‚îÇ   üìú logs.log      # –§–∞–π–ª –ª–æ–≥–æ–≤
‚îÇ   ‚îÇ       ‚îÇ   üõ†Ô∏è setup.go      # –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ª–æ–≥–æ–≤
‚îÇ   ‚îÇ       ‚îÇ
‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ üìÇ handlers/
‚îÇ   ‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ üóëÔ∏è slogdiscard/
‚îÇ   ‚îÇ       ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ üõ†Ô∏è slogdiscard.go
‚îÇ   ‚îÇ       ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ üé® slogpretty/
‚îÇ   ‚îÇ       ‚îÇ       ‚îî‚îÄ‚îÄ üõ†Ô∏è slogpretty.go
‚îÇ   ‚îÇ       ‚îÇ
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ üõ†Ô∏è sl/
‚îÇ   ‚îÇ           ‚îî‚îÄ‚îÄ üõ†Ô∏è sl.go
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ üìÇ migrations/      # –ú–∏–≥—Ä–∞—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ üìú 2_init.up.sql
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ üìÇ pkg/             # –ü–∞–∫–µ—Ç—ã –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ üìÇ directories/
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ üõ†Ô∏è util.go
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ üìÇ server/          # –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã —Å–µ—Ä–≤–µ—Ä–∞
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ üåç server.go
‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ üìÇ storage/         # –†–∞–±–æ—Ç–∞ —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö
‚îÇ       ‚îÇ   üõ†Ô∏è init.go
‚îÇ       ‚îÇ
‚îÇ       ‚îî‚îÄ‚îÄ üìÇ sqlite/
‚îÇ           ‚îî‚îÄ‚îÄ üõ¢Ô∏è db.go
‚îÇ
‚îú‚îÄ‚îÄ üîÑ migrator/            # –ú–∏–≥—Ä–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îî‚îÄ‚îÄ üõ†Ô∏è main.go
‚îÇ
‚îî‚îÄ‚îÄ üóÑÔ∏è storage/              # –•—Ä–∞–Ω–∏–ª–∏—â–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
    ‚îî‚îÄ‚îÄ üõ¢Ô∏è database.db
```

### üìå  —ç–º–æ–¥–∑–∏:
- üìÇ ‚Äî –ü–∞–ø–∫–∞
- üìú ‚Äî –§–∞–π–ª –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- üõ†Ô∏è ‚Äî –ö–æ–¥–æ–≤–∞—è –ª–æ–≥–∏–∫–∞
- üõ¢Ô∏è ‚Äî –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- üåç ‚Äî –°–µ—Ä–≤–µ—Ä
- üé® ‚Äî UI/–∫—Ä–∞—Å–∏–≤—ã–π –≤—ã–≤–æ–¥
- üóëÔ∏è ‚Äî –ò–≥–Ω–æ—Ä–∏—Ä—É–µ–º—ã–π/–Ω–µ–Ω—É–∂–Ω—ã–π –ª–æ–≥
- üîÑ ‚Äî –ú–∏–≥—Ä–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

---

## üõ†Ô∏è –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### üì© –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–µ–∫—Å—Ç–∞

```bash
curl -X POST http://localhost/steal \
  -H "Content-Type: text/plain" \
  -d "–ú–æ–π —Å–µ–∫—Ä–µ—Ç–Ω—ã–π —Ä–µ—Ü–µ–ø—Ç: 1 —á–∞—à–∫–∞ –º–∞–≥–∏–∏ ‚ú®"
```

### ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è

```bash
curl http://localhost/health
# {"status":"server is running"}
```

---

## üîç –°—Ö–µ–º–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

```sql
CREATE TABLE IF NOT EXISTS logs (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    text TEXT NOT NULL,
    remote_address TEXT NOT NULL,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP
);
```

---

## üí† –ü—Ä–∏–º–µ—Ä –ª–æ–≥–æ–≤

```log
2023/10/15 12:00:00 INFO server is running on :80
2023/10/15 12:00:05 INFO received text from 127.0.0.1 length=42
```
---

